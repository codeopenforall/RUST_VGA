This code simulates a real-world vulnerability (CWE-617: Reachable Assertion) where an attacker-influenced index is used inside an unsafe block to write to a buffer. The assertion, meant to ensure the index is within bounds, becomes a denial-of-service vector because an attacker can force an assertion failure with an out-of-range value. The design mimics community idioms by employing smart pointers, mutex-protected shared state, and concurrent threads.