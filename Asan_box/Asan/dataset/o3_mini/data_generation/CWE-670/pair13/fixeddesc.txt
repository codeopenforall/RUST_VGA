The corrected version fixes the flawed branch logic in the update method. Now, when the trigger is true and the current state is Idle, the controller properly transitions to Active. This change ensures that the invariant is maintained and the system's reported state accurately reflects the successful transition. The unsafe block remains in use to mimic realistic scenarios but no longer misapplies the control flow logic.